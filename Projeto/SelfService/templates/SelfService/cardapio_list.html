{% extends "Base.html" %}
{% block title %}Cardápio{% endblock %}
{% block header_title %}Cardápio{% endblock %}
{% block content %}
<section class="max-w-6xl mx-auto px-4 py-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-lg font-semibold">Itens do cardápio</h2>

    {# Só mostra o botão de criar para GERENTE #}
    {% if request.session.role == "GERENTE" %}
      <a href="{% url 'cardapio_create' %}" 
         class="px-3 py-2 bg-neutral-900 text-white rounded-lg text-sm">
         Novo item
      </a>
    {% endif %}
  </div>

  <div class="overflow-x-auto border rounded-xl">
    <table class="min-w-full divide-y">
      <thead class="bg-neutral-50">
        <tr>
          <th class="text-left px-4 py-2">Nome</th>
          <th class="text-left px-4 py-2">Descrição</th>
          <th class="text-left px-4 py-2">Preço</th>
          {% if request.session.role == "GERENTE" %}
            <th class="px-4 py-2"></th>
          {% endif %}
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for it in itens %}
        <tr>
          <td class="px-4 py-2 font-medium">{{ it.nome }}</td>
          <td class="px-4 py-2 text-neutral-600">{{ it.descricao|default:"—" }}</td>
          <td class="px-4 py-2">R$ {{ it.preco }}</td>

          {% if request.session.role == "GERENTE" %}
            <td class="px-4 py-2 text-right">
              <a href="{% url 'cardapio_update' it.pk %}" 
                 class="px-2 py-1 text-sm rounded bg-neutral-100">Editar</a>
              <a href="{% url 'cardapio_delete' it.pk %}" 
                 class="px-2 py-1 text-sm rounded bg-red-50 text-red-700">Excluir</a>
            </td>
          {% endif %}
        </tr>
        {% empty %}
        <tr>
          <td colspan="{% if request.session.role == 'GERENTE' %}4{% else %}3{% endif %}" 
              class="px-4 py-6 text-center text-neutral-500">
            Nenhum item cadastrado.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
