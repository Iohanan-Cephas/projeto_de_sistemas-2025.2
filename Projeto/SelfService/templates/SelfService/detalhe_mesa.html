{% extends "Base.html" %}
{% block title %}Mesa {{ mesa.numero }}{% endblock %}
{% block header_title %}Mesa {{ mesa.numero }}{% endblock %}

{% block content %}
<section class="max-w-5xl mx-auto px-4 py-6 space-y-4">
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-lg font-semibold">Mesa {{ mesa.numero }}</h2>
      <p class="text-sm text-neutral-500">Capacidade: {{ mesa.capacidade }}</p>
    </div>
    <a href="{% url 'adicionar_pedido' mesa.id %}" class="px-3 py-2 rounded-lg bg-neutral-900 text-white text-sm">
      Novo pedido
    </a>
  </div>

  <div class="border rounded-xl overflow-hidden">
    <table class="min-w-full divide-y">
      <thead class="bg-neutral-50">
        <tr>
          <th class="text-left px-4 py-2">#</th>
          <th class="text-left px-4 py-2">Status</th>
          <th class="text-left px-4 py-2">Criado em</th>
          <th class="text-left px-4 py-2">Itens</th>
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for p in pedidos %}
          <tr>
            <td class="px-4 py-2">Pedido {{ p.id }}</td>
            <td class="px-4 py-2">{{ p.get_status_display }}</td>
            <td class="px-4 py-2">{{ p.criado_em }}</td>
            <td class="px-4 py-2">
              <ul class="list-disc ml-5">
                {% for ip in p.itens_pedido.all %}
                  <li>{{ ip.quantidade }}Ã— {{ ip.item.nome }}</li>
                {% endfor %}
              </ul>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="4" class="px-4 py-6 text-center text-neutral-500">Sem pedidos para esta mesa.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div>
    <a href="{% url 'lista_mesas' %}" class="text-sm underline">Voltar para mesas</a>
  </div>
</section>
{% endblock %}
